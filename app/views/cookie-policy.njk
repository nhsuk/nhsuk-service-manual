{% extends "layouts/layout.njk" %}

{% set pageTitle = "Cookie policy" %}
{% set pageDescription = "Find out about the cookies we use on the NHS digital service manual and how to turn them on or off." %}

{% block content %}
<div class="nhsuk-grid-row">
  <div class="nhsuk-grid-column-full">

    <div class="nhsuk-u-reading-width">

      <h1>{{ pageTitle }}</h1>

      <h2>What are cookies?</h2>
      <p>Cookies are files saved on your phone, tablet or computer when you visit a website.</p>
      <p>They store information about how you use the website, such as the pages you visit.</p>
      <p>Cookies are not viruses or computer programs. They are very small so do not take up much space.</p>

      <h2>How we use cookies</h2>
      <p>We only use cookies to:</p>
      <ul>
        <li>make our website work</li>
        <li>measure how you use our website, such as which links you click on (analytics cookies), if you give us permission</li>
      </ul>
      <p>We do not use any other cookies, for example, cookies that remember your settings or cookies that help with health campaigns.</p>
      <p>We sometimes use tools on other organisations' websites to collect data or to ask for feedback. These tools set their own cookies. </p>

      <h2>Cookies that make our website work</h2>
      <p>We use cookies to keep our website secure and fast.</p>
    </div>

    {% call details({
      summaryText: "List of cookies that make our website work"
    }) %}
      {{ table({
        caption: "Cookie names and purposes",
        captionClasses: "nhsuk-u-visually-hidden",
        responsive: true,
        head: [
          {
            text: "Cookie name"
          },
          {
            text: "Purpose"
          },
          {
            text: "Expiry"
          }
        ],
        rows: [
          [
            {
              header: "Cookie name",
              text: "nhsuk-cookie-consent"
            },
            {
              header: "Purpose",
              text: "Remembers if you used our cookies banner"
            },
            {
              header: "Expiry",
              text: "When you close the browser (if you do not use the banner) or 1 year (if you use the banner)"
            }
          ]
        ]
      }) }}
    {% endcall %}

    <div class="nhsuk-u-reading-width">
      <h2>Cookies that measure website use</h2>
      <p>We also like to use analytics cookies. These cookies store anonymous information about how you use our website, such as which pages you visit or what you click on.</p>
    </div>

    {% call details({
      summaryText: "List of cookies that measure website use"
    }) %}
      {{ table({
        caption: "Cookie names and purposes",
        captionClasses: "nhsuk-u-visually-hidden",
        responsive: true,
        head: [
          {
            text: "Cookie name"
          },
          {
            text: "Purpose"
          },
          {
            text: "Expiry"
          }
        ],
        rows: [
          [
            {
              header: "Cookie name",
              text: "AMCV_#"
            },
            {
              header: "Purpose",
              text: "Used by Adobe Analytics. Tells us if you've used our site before."
            },
            {
              header: "Expiry",
              text: "2 years"
            }
          ],
          [
            {
              header: "Cookie name",
              text: "AMCVS_#AdobeOrg"
            },
            {
              header: "Purpose",
              text: "Used by Adobe Analytics. Tells us how you use our site."
            },
            {
              header: "Expiry",
              text: "When you close the browser"
            }
          ],
          [
            {
              header: "Cookie name",
              html: "com.<wbr>adobe.<wbr>reactor.<wbr>dataElement<wbr>Cookies<wbr>Migrated",
              classes: "nhsuk-u-text-break-word"
            },
            {
              header: "Purpose",
              text: "Used by Adobe Analytics. Includes data elements set to capture usage of our website."
            },
            {
              header: "Expiry",
              text: "No expiry"
            }
          ],
          [
            {
              header: "Cookie name",
              text: "demdex"
            },
            {
              header: "Purpose",
              text: "Used by Adobe Analytics. Allows cross-domain analytics of NHS properties."
            },
            {
              header: "Expiry",
              text: "180 days"
            }
          ],
          [
            {
              header: "Cookie name",
              text: "s_cc"
            },
            {
              header: "Purpose",
              text: "Used by Adobe Analytics. Checks if cookies work in your web browser."
            },
            {
              header: "Expiry",
              text: "When you close the browser"
            }
          ],
          [
            {
              header: "Cookie name",
              text: "s_getNewRepeat"
            },
            {
              header: "Purpose",
              text: "Used by Adobe Analytics. Tells us if you've used our website before."
            },
            {
              header: "Expiry",
              text: "30 days"
            }
          ],
          [
            {
              header: "Cookie name",
              text: "s_ppn"
            },
            {
              header: "Purpose",
              text: "Used by Adobe Analytics. Tells us how you use our website by reading the previous page you visited."
            },
            {
              header: "Expiry",
              text: "1 day"
            }
          ],
          [
            {
              header: "Cookie name",
              text: "s_sq"
            },
            {
              header: "Purpose",
              text: "Used by Adobe Analytics. Remembers the last link you clicked on."
            },
            {
              header: "Expiry",
              text: "When you close the browser"
            }
          ]
        ]
      }) }}
    {% endcall %}

    <div class="nhsuk-u-reading-width">
      <p>We'll only use these cookies if you say it's OK. We'll use a cookie to save your settings.</p>

      {{ radios({
        classes: "nhsuk-radios--inline",
        fieldset: {
          legend: {
            text: "Tell us if we can use analytics cookies",
            classes: "nhsuk-fieldset__legend--m"
          }
        },
        name: "input-statistics",
        items: [
          {
            text: "Use cookies to measure my website use",
            value: "yes"
          },
          {
            text: "Do not use cookies to measure my website use",
            value: "no"
          }
        ]
      }) }}

      {{ button({
        href: "/cookie-confirmation",
        text: "Save my cookie settings",
        classes: "nhsuk-u-margin-bottom-0",
        attributes: { id: "button-statistics" }
      }) }}

    </div>

    <p class="nhsuk-body-s nhsuk-u-secondary-text-colour nhsuk-u-margin-top-7 nhsuk-u-margin-bottom-0">Updated: April 2025</p>

  </div>
</div>
{% endblock %}

{% block bodyEnd %}
  {{ super() }}

  <script type="module">
    const $radioYes = document.getElementById("input-statistics")
    const $radioNo = document.getElementById("input-statistics-2")
    const $button = document.getElementById("button-statistics")

    // Update radios based on cookie preferences
    $radioYes.checked = NHSCookieConsent.getStatistics()
    $radioNo.checked = !NHSCookieConsent.getStatistics()

    // Update cookie preferences based on radios
    $button.addEventListener("click", () => {
      NHSCookieConsent.setStatistics($radioYes.checked)
      NHSCookieConsent.setConsented(true);
    });
  </script>
{% endblock %}
