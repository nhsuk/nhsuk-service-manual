{% set pageTitle = 'Search' %}
{% set pageDescription = 'Search results.' %}

{% extends 'includes/layout.njk' %}

{% block body %}
  <div class="nhsuk-grid-row">
    <div class="nhsuk-grid-column-two-thirds">
      <h1 class="nhsuk-heading-xl nhsuk-u-margin-bottom-4">Search</h1>
      <form class="nhsuk-header__search-form nhsuk-header__search-form--search-results" id="search" action="/service-manual/search/" method="get" role="search">
        <label class="nhsuk-u-visually-hidden" for="search-results-field">Search the NHS digital service manual</label>
        <input class="nhsuk-search__input" id="search-results-field" name="search-field" type="search" value="{{query}}" autocomplete="off">
        <button class="nhsuk-search__submit" type="submit">
          <svg class="nhsuk-icon nhsuk-icon__search" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
            <path d="M19.71 18.29l-4.11-4.1a7 7 0 1 0-1.41 1.41l4.1 4.11a1 1 0 0 0 1.42 0 1 1 0 0 0 0-1.42zM5 10a5 5 0 1 1 5 5 5 5 0 0 1-5-5z"></path>
          </svg>
          <span class="nhsuk-u-visually-hidden">Search</span>
        </button>
      </form>
    </div>
  </div>
  <article>
    <div class="nhsuk-grid-row">
      <div class="nhsuk-grid-column-two-thirds">
        {% if results | length > 0 %}
          <ul class="nhsuk-list nhsuk-list--border">
            {% for item in results %}
              <li>
                <a href="{{item.url}}" class="app-search-results-item">{{item.title}}</a>
                <p class="nhsuk-body-s nhsuk-u-margin-top-1 nhsuk-u-secondary-text-color">{{item.description}}</p>
              </li>
            {% endfor %}
          </ul>
        {% else %}
          {% if query != "" %}
            <p>Your search - <span class="nhsuk-u-font-weight-bold">{{query}}</span> - had no matching results.</p>
            <p>Improve your search results by:</p>
            <ul>
              <li>double-checking your spelling</li>
              <li>using fewer keywords</li>
              <li>searching for something less specific</li>
            </ul>
          {% endif %}
        {% endif %}
        </div>
    </div>
  </article>
{% endblock %}
